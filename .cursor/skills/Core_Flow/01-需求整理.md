# Skill: Requirement Organizer（需求整理器）

## 📋 技能依赖声明

### 必须依赖

- ✅ `01_Input/` 目录存在
- ✅ `01_Input/` 中至少有一个 PDF 文档

### 依赖检查失败时的提示

```
⚠️ 需求整理需要输入文件，请先将 PDF 文档放入 01_Input/ 目录
```

---

## 🛡️ Safety Protocol（防幻觉协议）

- **Strict Scope**: 仅提取文档中显式提到的逻辑，不发明、不脑补、不优化。
- **Gap Flagging**: 遇到逻辑断层时，标注 `> ❓ 待确认：...`，严禁自动补全。
- **Question Context**: 每个待确认问题必须引用触发该问题的原文。
- **Source Tracking**: 每个功能点都标注来源（原文："xxx"）。
- **File Output Only**: 结果必须写入 `_WORK_SHEET.md`，严禁在对话框直接输出分析全文。
- **Text Focus**: 专注提取文字逻辑，图片由产品在 PRD 阶段自行补充。
- **Exclude Dev Content**: 排除开发阶段的内容（功能拆分表格、排期安排、开发人员信息等）。

---

## 📝 处理规则

### 1. 分端拆解

强制拆分为以下分类：

- **[Web端]**: PC 浏览器访问的功能
- **[App端]**: iOS/Android 原生应用功能
- **[管理后台]**: 运营/管理员使用的后台系统
- **[API/后端]**: 纯后端逻辑，无前端界面

### 2. 页面级别拆解

在每个端的分类下，按 **页面/URL** 进一步分组：

**拆解原则**：

- 同一个 URL/页面路径下的所有功能，归为一组
- 每个页面组包含：页面路径、页面功能列表
- 如果原文未明确提及 URL，按页面名称分组（如"个人中心页"、"订单列表页"）
- 如果连页面名称都没有，标记 `> ❓ 待确认：该功能所属页面`

**防脑补规则**：

- 如果原文未说明在哪个页面 → 标记 `❓ 待确认`
- 如果原文未提及 URL → 写页面名称，URL 留空或标记待确认
- 不要自己编造 URL 路径结构

### 3. 规则提取

抓取所有数字、限制、约束条件，归类到 **[限制规则]**。

- **原则**: 只记录原文明确提到的限制，不推断。

### 4. 异常捕获

识别兜底逻辑和异常处理，归类到 **[异常流程]**。

- **原则**: 如果原文未提及异常处理，标注 `> ❓ 待确认`。

### 5. PDF 文档处理

**排除开发内容**（重要）：

- ❌ 功能拆分表格（前后端分工、估时等）
- ❌ 排期甘特图、开发时间线
- ❌ 开发人员投入安排、头像信息

这些是需求评审通过后，开发团队填写的内容，不属于需求阶段。

**图片处理**：

- 不处理图片内容，图片由产品在 PRD 阶段自行补充
- 专注提取文字描述的功能逻辑

---

## 📤 输出规则

**输出路径**: `_WORK_SHEET.md`（项目根目录，唯一文件）

### 文件结构

创建或覆盖根目录下的 `_WORK_SHEET.md` 文件，包含两部分：

**Part 1: 待确认问题汇总**

- 供 PM 直接填写
- 每个问题包含：来源、原文引用、问题描述、回答区域
- 问题格式：

  ```markdown
  ### Q{序号} [⏳ 待回答]

  **来源**: 01-需求整理
  **原文**: "[引用触发该问题的原文]"
  **问题**: [问题描述]
  **[回答]**:
  ```

**Part 2: 详细拆解报告**

- AI 生成的完整分析内容
- 包含：核心目标、分端拆解、限制规则、异常流程、依赖关系、原文摘录

### 元数据头部

在文件顶部添加 YAML 格式的元数据：

```yaml
---
created_at: { 创建时间 }
last_updated: { 最后更新时间 }
status: pending
pending_count: { 待回答问题数量 }
answered_count: 0
---
```

在元数据后添加状态说明：

```markdown
> 📊 **当前状态**: 待确认 | 待回答问题: {数量}个 | 已回答: 0个
```

---

## ✅ 自检清单

输出文件前必须检查：

- [ ] 是否已生成 `_WORK_SHEET.md` 文件？
- [ ] 是否已添加元数据头部（包含状态信息）？
- [ ] 每个问题是否都引用了触发该问题的原文？
- [ ] 待确认问题是否已提取到 Part 1 区域？
- [ ] 每个功能点是否都标注了来源（原文："xxx"）？
- [ ] 是否按页面级别分组（同一 URL/页面下的功能归在一起）？
- [ ] 如果原文未提及 URL，是否标记待确认而非自己编造？
- [ ] 是否排除了开发阶段的内容（排期、拆分表格等）？

---

_Last Updated: 2026-02-11_
