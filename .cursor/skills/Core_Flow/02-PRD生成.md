# Skill: PRD Generator（需求文档生成器）

## 📋 技能依赖声明

### 必须依赖

- ✅ `_WORK_SHEET.md` 文件存在（项目根目录）
- ✅ `_WORK_SHEET.md` 包含 Part 1（决策）和 Part 2（逻辑）

### 依赖检查失败时的提示

```
⚠️ PRD 生成需要先完成需求整理

请执行以下步骤：
1. 对 AI 说："整理一下"
2. 等待生成 _WORK_SHEET.md 文件
3. 填写文件中的待确认问题
4. 再次执行"生成文档"
```

---

## 🛡️ Safety Protocol（核心原则）

- **Decision First**: `_WORK_SHEET.md` 中的 **[回答]** 是最高指令，PRD 必须完全遵循这些决策。
- **No Residuals**: 生成的文档中严禁保留"Q&A"、"待确认列表"等过程信息，必须转化为确定的功能描述。
- **Product Focus Only**: PRD 只写"做什么"，不写"怎么做"。严禁包含技术实现、接口设计、数据库设计等开发内容。
- **Format First**: 将口语化、结构化的工作台内容转化为正式的 PRD 语言和标准文档格式。

---

## 📝 核心职责

这是产品工作流的**最终格式化引擎**。

**输入**：`_WORK_SHEET.md`（结构化的工作台文件）  
**处理**：格式转化、语言规范化、文档结构化  
**输出**：`03_Output/PRD_*.md`（正式的产品需求文档）

---

## 🔄 处理流程

### Step 1: 读取工作台内容

- 读取 `_WORK_SHEET.md` 文件
- 提取 Part 1（待确认问题）中**已回答**的问题（状态为 `[✅ 已回答]` 或 `[🔄 已更新]`）
- 提取 Part 2（详细拆解）中的所有业务逻辑

### Step 2: 格式化为 PRD 语言

将工作台的内容转化为正式的 PRD 表达：

**转化规则**：

- **问答 → 陈述**：将"Q: 入口在哪？A: 首页顶部"转化为"入口位置：首页顶部导航栏"
- **口语 → 书面**：将口语化描述转化为规范的产品文档语言
- **结构 → 章节**：按照标准 PRD 格式组织内容（核心目标、功能设计、规则、异常）
- **分散 → 整合**：将分散在问答中的决策整合到对应的功能模块

**禁止内容**（绝对不能出现）：

- ❌ 后端逻辑、接口设计、数据库设计
- ❌ 技术实现、代码逻辑、算法描述
- ❌ "需要接口返回XXX"、"后端需要校验XXX"等推断逻辑

**正确做法**：

- ✅ 描述业务规则、用户行为、数据展示、权限控制

### Step 3: 输出正式文档

生成符合规范的 PRD 文档并保存到 `03_Output/` 目录。

---

## 📤 输出规范

### 文件命名

```
PRD_{功能名}_v{版本号}_{日期}.md
```

**示例**：

- `PRD_user_whitelist_v1.0_20260211.md`
- `PRD_pnl_share_v1.2_20260215.md`

**命名规则**：

- 功能名：使用下划线连接，避免空格
- 版本号：v1.0, v1.1, v2.0（语义化版本）
- 日期：YYYYMMDD 格式

### 文档结构

PRD 文档必须包含以下章节：

```markdown
# [功能名称] 产品需求文档

## 文档信息

| 项目     | 内容       |
| -------- | ---------- |
| 版本     | v{版本号}  |
| 生成日期 | {日期时间} |
| 文件名   | {文件名}   |

## 📚 版本历史

| 版本 | 日期 | 主要变更 |
| ---- | ---- | -------- |
| ...  | ...  | ...      |

## 1. 🎯 核心目标

[基于 Part 2 的目标描述]

## 2. 📱 功能详细设计

### 2.1 [端/模块名称]

#### 功能说明

[描述用户可以做什么]

**业务规则**：

- [权限、限制、条件]

**交互规则**：

- [用户操作和系统响应]

**异常处理**：

- [失败时的处理方式]

## 3. ⚠️ 全局限制与规则

[业务规则、权限控制、数据规则]

## 4. 🔄 异常流程与边界处理

[用户视角的异常场景和处理方式]

## 5. 📝 遗留/待定事项

[未回答的问题归档到这里]
```

### 图片处理

如果原始需求中有图片引用，在 PRD 中添加占位符：`[图片占位：{说明}]`，由 PM 后续补充。

---

## ✅ 自检清单

输出文件前必须检查：

- [ ] 是否已读取 `_WORK_SHEET.md` 的 Part 1 和 Part 2？
- [ ] 是否将所有已回答的问题转化为陈述句？
- [ ] 是否按照标准 PRD 结构组织内容？
- [ ] 是否删除了所有过程信息（Q&A、待确认列表）？
- [ ] 是否避免了技术实现、接口设计等开发内容？
- [ ] 文件名是否符合命名规范？
- [ ] 是否保存到 `03_Output/` 目录？

---

_Last Updated: 2026-02-11_
